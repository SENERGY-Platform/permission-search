{
	"server_port":		          "8080",
	"log_level":		              "CALL",

	"perm_topic": "permissions",

    "kafka_url": "kafka:9092",
    "group_id": "permsearch",

	"force_user": "true",
	"force_auth": "true",

    "elastic_url": "http://elastic:9200",
    "elastic_retry": 3,

    "http_server_timeout": "30s",
    "http_server_read_timeout": "3s",

	"resources": {
        "concepts": {
            "features":[
                {"Name": "name", "Path": "$.concept.name"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
        "characteristics": {
            "features":[
                {"Name": "name", "Path": "$.characteristic.name"},
                {"Name": "display_unit", "Path": "$.characteristic.display_unit"},
                {"Name": "concept_id", "Path": "$.concept_id"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
		"processmodel":{
            "features":[
                {"Name": "name", "Path": "$.processmodel.name"},
                {"Name": "date", "Path": "$.processmodel.date"},
                {"Name": "svgXML", "Path": "$.processmodel.svgXML"},
                {"Name": "publish", "Path": "$.processmodel.publish"},
                {"Name": "parent_id", "Path": "$.processmodel.parent_id"},
                {"Name": "description", "Path": "$.processmodel.description"}
            ],
            "initial_group_rights":{"admin": "rwxa"}
        },
		"devices":{
            "features":[
                {"Name": "name", "Path": "$.device.name"},
                {"Name": "device_type_id", "Path": "$.device.device_type_id"},
                {"Name": "local_id", "Path": "$.device.local_id"},
                {"Name": "attributes", "Path": "$.device.attributes"}
            ],
            "annotations": {
                "device_log": [
                    {"Name": "_id", "Path": "$.id"},
                    {"Name": "connected", "Path": "$.connected"}
                ]
            },
            "initial_group_rights":{"admin": "rwxa"}
        },
		"device-types":{
            "features":[
                {"Name": "name", "Path": "$.device_type.name"},
                {"Name": "description", "Path": "$.device_type.description"},
                {"Name": "service", "Path": "$.device_type.services[*].id"},
                {"Name": "protocols", "Path": "$.device_type.services[*].protocol_id"},
                {"Name": "device_class_id", "Path": "$.device_type.device_class_id"},
                {"Name": "attributes", "Path": "$.device_type.attributes"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
        "device-classes":{
            "features":[
                {"Name": "name", "Path": "$.device_class.name"},
                {"Name": "image", "Path": "$.device_class.image"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
        "device-groups":{
            "features":[
                {"Name": "name", "Path": "$.device_group.name"},
                {"Name": "image", "Path": "$.device_group.image"},
                {"Name": "device_ids", "Path": "$.device_group.device_ids"},
                {"Name": "criteria", "Path": "$.device_group.criteria"},
                {"Name": "criteria_short", "Path": "$.device_group.criteria_short"}
            ],
            "initial_group_rights":{ "system": "rwxa" }
        },
        "aspects":{
            "features":[
                {"Name": "name", "Path": "$.aspect.name"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
        "functions":{
            "features":[
                {"Name": "name", "Path": "$.function.name"},
                {"Name": "display_name", "Path": "$.function.display_name"},
                {"Name": "description", "Path": "$.function.description"},
                {"Name": "rdf_type", "Path": "$.function.rdf_type"},
                {"Name": "concept_id", "Path": "$.function.concept_id"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
        "hubs": {
            "features": [
                {"Name": "name", "Path": "$.hub.name"},
                {"Name": "device_local_ids", "Path": "$.hub.device_local_ids"}
            ],
            "annotations": {
                "gateway_log": [
                    {"Name": "_id", "Path": "$.id"},
                    {"Name": "connected", "Path": "$.connected"}
                ]
            },
            "initial_group_rights":{"admin": "rwxa"}
        },
        "protocols": {
            "features":[
                {"Name": "name", "Path": "$.protocol.name"},
                {"Name": "handler", "Path": "$.protocol.handler"},
                {"Name": "segments", "Path": "$.protocol.protocol_segments[*].name"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": "rx"}
        },
        "import-types": {
            "features":[
                {"Name": "name", "Path": "$.import_type.name"},
                {"Name": "description", "Path": "$.import_type.description"},
                {"Name": "image", "Path": "$.import_type.image"},
                {"Name": "default_restart", "Path": "$.import_type.default_restart"},
                {"Name": "aspect_ids", "Path": "$.import_type.aspect_ids"},
                {"Name": "function_ids", "Path": "$.import_type.function_ids"},
                {"Name": "aspect_functions", "Path": "$.import_type.aspect_functions"}
            ],
            "initial_group_rights":{"admin": "rwxa", "user": ""}
        },
        "locations":{
            "features":[
                {"Name": "name", "Path": "$.location.name"},
                {"Name": "description", "Path": "$.location.description"},
                {"Name": "image", "Path": "$.location.image"},
                {"Name": "device_ids", "Path": "$.location.device_ids"},
                {"Name": "device_group_ids", "Path": "$.location.device_group_ids"}
            ],
            "initial_group_rights":{"admin": "rwxa"}
        }
    },
    "initial_group_rightsUpdate": "false",

    "elastic_mapping": {
        "concepts": {
            "features": {
                "name":   {"type": "keyword", "copy_to": "feature_search"}
            }
        },
        "characteristics": {
            "features": {
                "name":                 {"type": "keyword", "copy_to": "feature_search"},
                "concept_id":           {"type": "keyword"}
            }
        },
        "device-types": {
            "features": {
                "description":  {"type": "text", "copy_to": "feature_search"},
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "service":      {"type": "keyword"},
                "protocols":    {"type": "keyword"},
                "attributes":{
                    "properties":{
                        "key":{"type":"keyword"},
                        "value":{"type":"keyword"}
                    }
                }
            }
        },
        "device-groups": {
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "image":        {"type": "keyword"},
                "device_ids":   {"type": "keyword"},
                "criteria_short": {"type": "keyword"}
            }
        },
        "device-classes": {
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "image":        {"type": "keyword"}
            }
        },
        "aspects": {
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"}
            }
        },
        "functions": {
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "description":  {"type": "keyword"},
                "rdf_type":     {"type": "keyword"},
                "concept_id":   {"type": "keyword"}
            }
        },
        "processmodel":{
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "date":         {"type": "date"},
                "publish":      {"type": "boolean"},
                "parent_id":    {"type": "keyword"}
            }
        },
        "devices":{
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "description":  {"type": "text",    "copy_to": "feature_search"},
                "device_type_id":  {"type": "keyword"},
                "local_id":     {"type": "keyword"},
                "attributes":{
                    "properties":{
                        "key":{"type":"keyword"},
                        "value":{"type":"keyword"}
                    }
                }
            },
            "annotations": {
                "connected": {"type":"boolean"}
            }
        },
        "protocols":{
            "features": {
                "name":     {"type": "keyword", "copy_to": "feature_search"},
                "handler":  {"type": "keyword"},
                "segments":  {"type": "keyword"}
            }
        },
        "hubs":{
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "device_local_ids":      {"type": "keyword"}
            },
            "annotations": {
                "connected": {"type":"boolean"}
            }
        },
        "import-types":{
            "features": {
                "name":               {"type": "keyword", "copy_to": "feature_search"},
                "description":        {"type": "keyword"},
                "image":              {"type": "keyword"},
                "default_restart":    {"type": "boolean"},
                "aspect_ids":         {"type": "keyword"},
                "function_ids":       {"type": "keyword"},
                "aspect_functions":   {"type": "keyword"}
            }
        },
        "locations":{
            "features": {
                "name":         {"type": "keyword", "copy_to": "feature_search"},
                "description":  {"type": "text",    "copy_to": "feature_search"},
                "image":        {"type": "keyword"},
                "device_ids":   {"type": "keyword"},
                "device_group_ids":  {"type": "keyword"}
            }
        }
    }
}
